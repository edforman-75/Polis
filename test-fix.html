<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Campaign Content Editor - Fix Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        textarea { width: 100%; height: 200px; padding: 10px; }
        button { padding: 10px 20px; margin: 10px 5px; background: #007cba; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #005a87; }
        .result { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Campaign Content Editor - Fix Test</h1>
        <p>This test verifies that the element ID fix is working correctly.</p>

        <div>
            <label for="paste-input">Text Input (ID: paste-input):</label>
            <textarea id="paste-input" placeholder="Paste your text here to test the fix..."></textarea>
        </div>

        <div>
            <button onclick="testGetCurrentText()">Test getCurrentText() Function</button>
            <button onclick="clearResults()">Clear Results</button>
        </div>

        <div id="results"></div>
    </div>

    <script>
        // The fixed getCurrentText function from the actual app
        function getCurrentText() {
            const activeTab = document.querySelector('.tab.active') || document.querySelector('[data-tab="paste"]');
            if (!activeTab) {
                // Fallback to paste tab if no active tab found
                return document.getElementById('paste-input').value;
            }

            const tabName = activeTab.dataset.tab;
            if (tabName === 'paste') {
                return document.getElementById('paste-input').value;
            } else if (tabName === 'file' && this.originalText) {
                return this.originalText;
            }
            return '';
        }

        function testGetCurrentText() {
            const resultsDiv = document.getElementById('results');

            try {
                const text = getCurrentText();

                if (text.trim() === '') {
                    resultsDiv.innerHTML = `
                        <div class="result error">
                            <h3>‚ö†Ô∏è No Text Found</h3>
                            <p>Please paste some text in the textarea above and try again.</p>
                        </div>
                    `;
                    return;
                }

                resultsDiv.innerHTML = `
                    <div class="result success">
                        <h3>‚úÖ Fix Working Correctly!</h3>
                        <p><strong>Text Retrieved:</strong> "${text.substring(0, 100)}${text.length > 100 ? '...' : ''}"</p>
                        <p><strong>Text Length:</strong> ${text.length} characters</p>
                        <p><strong>Element ID:</strong> paste-input ‚úì</p>
                        <p><strong>Status:</strong> The getCurrentText() function is now correctly retrieving text from the paste-input element.</p>
                    </div>
                `;

            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="result error">
                        <h3>‚ùå Error</h3>
                        <p><strong>Error:</strong> ${error.message}</p>
                        <p>The fix may not be working correctly.</p>
                    </div>
                `;
            }
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('paste-input').value = '';
        }

        // Auto-populate with sample text for easy testing
        window.onload = function() {
            document.getElementById('paste-input').value = `U.S. Congresswoman Abigail Spanberger (VA-07) is serving her third term in the U.S. House of Representatives. In Congress, she serves on the U.S. House Permanent Select Committee on Intelligence and the U.S. House Agriculture Committee ‚Äî and she has risen to become one of the most bipartisan lawmakers in the country.

Before Congress, Spanberger served as a federal law enforcement officer ‚Äî tracking narcotics traffickers and working money laundering cases ‚Äî and as a CIA case officer ‚Äî working undercover on counterterrorism and nuclear counterproliferation cases. She and her husband Adam are the proud parents of three school-aged daughters.`;
        };
    </script>
</body>
</html>